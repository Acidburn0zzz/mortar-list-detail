define(["require","./anim"],function(e){function n(){}var t=e("./anim");return n.prototype.push=function(e){var t=this._stack;t||(t=this._stack=[]);if(t.indexOf(e)!==-1)return;t.push(e);var n=e.view,r=n.stack;if(r&&r.open){var i=Array.prototype.slice.call(arguments,1);n[r.open].apply(n,i)}this.animatePush(e),t.length>1&&n.header&&n.header.addBack(this)},n.prototype.animatePush=function(e){e=$(e),this._stack.length>1&&anim.slideLeft(e),e.css({zIndex:100+this._stack.length})},n.prototype.pop=function(){if(this._stack){var e=this._stack.pop(),t=e.view,n=t.stack;if(n&&n.close){var r=Array.prototype.slice.call(arguments,1);t[n.close].apply(t,r)}$(e).css({left:$(this._stack[this._stack.length-1]).width()})}},n.prototype.iterate=function(e){this._stack.forEach(function(t){e(t)})},n.prototype.find=function(e){return this._stack.indexOf(e)!==-1},n})